<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: bit manipulation - lawilet&#039;s website</title><meta property="og:type" content="blog"><meta property="og:title" content="lawilet&#039;s website"><meta property="og:url" content="http://law-liet.com/"><meta property="og:site_name" content="lawilet&#039;s website"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://law-liet.com/img/og_image.png"><meta property="article:author" content="lawiet019"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://law-liet.com"},"headline":"lawilet's website","image":["http://law-liet.com/img/og_image.png"],"author":{"@type":"Person","name":"lawiet019"},"description":""}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.png" alt="lawilet&#039;s website" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lawiet019"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">bit manipulation</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-05-28T01:23:00.000Z" title="2020-05-28T01:23:00.000Z">2020-05-27</time><span class="level-item"> lawiet019 </span><span class="level-item"><a class="link-muted" href="/categories/technology/">technology</a></span><span class="level-item">9 minutes read (About 1395 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/05/27/bit-manipulation-in-python/">bit manipulation in python</a></h1><div class="content"><h3 id="Basic-of-bitwise-Operations"><a href="#Basic-of-bitwise-Operations" class="headerlink" title="Basic of bitwise Operations"></a>Basic of bitwise Operations</h3><ul>
<li>not (~)<br>If the number of not is an unsigned integer (it cannot represent a negative number), the result is the difference between it and the upper bound of the type<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~1  -&gt; 0</span><br><span class="line">~0  -&gt; 1</span><br></pre></td></tr></table></figure></li>
<li><p>and （&amp;）<br>The and operation is usually used for get a certain bit. For example, the result of <code>x &amp; 1</code> is to get the last bit of <code>x</code>. This can be used to judge the parity of an integer. The last bit of a binary is 0, which means the number is even, and the last bit is 1, which means the number is odd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 &amp; 1 -&gt; 1</span><br><span class="line">0 &amp; 0 -&gt; 0</span><br><span class="line">0 &amp; 1 -&gt; 0</span><br></pre></td></tr></table></figure></li>
<li>or (|)<br>Or operation is usually used for  assignment on binary special bit. For example, the result of x |1 is to make the last bit of x to 1. If you need to change the last bit of binary number  to 0, you can use x &amp; 1 -1. Its practical meaning is to force the number to the nearest even number<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 | 1 -&gt; 1</span><br><span class="line">0 | 0 -&gt; 0</span><br><span class="line">1 | 0 -&gt; 1</span><br></pre></td></tr></table></figure></li>
<li>xor (^)<br>if we xor the same number twice,we will get the number itself<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 ^ 1 -&gt; 0</span><br><span class="line">0 ^ 0 -&gt; 0</span><br><span class="line">1 ^ 0 -&gt; 1</span><br></pre></td></tr></table></figure></li>
<li><p>right shift(&gt;&gt;):<br>Right shift is equivalent to dividing the bit pattern with 2k ( if we are shifting k bits ).the least-significant bit is lost, and a 0 bit is inserted on the other end(if the number has no sign bit)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; 8:  0000 0000 0000 0000 0000 0000 0000 1000</span><br><span class="line">a &gt;&gt; 3: 0000 0000 0000 0000 0000 0000 0000 0001</span><br></pre></td></tr></table></figure>
</li>
<li><p>left shift(&lt;&lt;):</p>
<p>Right shift is equivalent to multipling the bit pattern with 2k ( if we are shifting k bits ).the most-significant bit is lost, and a 0 bit is inserted on the other end(if the number has no sign bit)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; 8： 0000 0000 0000 0000 0000 0000 0000 1000</span><br><span class="line">a &lt;&lt; 3：0000 0000 0000 0000 0000 0000 0100 0000</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="the-order-of-bitwise-operation-in-Python"><a href="#the-order-of-bitwise-operation-in-Python" class="headerlink" title="the order of bitwise operation in Python"></a>the order of bitwise operation in Python</h3><div class="table-container">
<table>
<thead>
<tr>
<th>operator precedence（from highest to lowest)</th>
</tr>
</thead>
<tbody>
<tr>
<td>~x</td>
</tr>
<tr>
<td>x&lt;<y，x>&gt;y</td>
</tr>
<tr>
<td>x&amp;y</td>
</tr>
<tr>
<td>x^y</td>
</tr>
<tr>
<td>x&#124;y</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Original-code-vs-Inverse-code-vs-Complement-code"><a href="#Original-code-vs-Inverse-code-vs-Complement-code" class="headerlink" title="Original code vs Inverse code vs Complement code"></a>Original code vs Inverse code vs Complement code</h3><ul>
<li>original code:<br> sign bit  &amp; real value  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  	[+1]ori &#x3D; 0000 0001</span><br><span class="line"></span><br><span class="line">[-1]ori &#x3D; 1000 0001</span><br></pre></td></tr></table></figure></li>
<li><p>Inverse code </p>
<p>  The inverse of a positive number is itselfThe inverse code of a negative number is based on the original code, the sign bit remains unchanged, and the remaining bits are reversed.</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   [+1] &#x3D; [00000001]ori &#x3D; [00000001]inv</span><br><span class="line"></span><br><span class="line">[-1] &#x3D; [10000001]ori &#x3D; [11111110]inv</span><br></pre></td></tr></table></figure></li>
<li><p>complement code (Two’s complement )</p>
<p>  The complement of a positive number is itself.The complement of a negative number is based on the original code, the sign bit remains unchanged, the rest of the bits are fliped, and finally +1. (That is, +1 on the basis of the inverse code)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   [+1] &#x3D; [00000001]ori &#x3D; [00000001]inv &#x3D; [00000001]com</span><br><span class="line"></span><br><span class="line">[-1] &#x3D; [10000001]ori &#x3D; [11111110]inv &#x3D; [11111111]com</span><br></pre></td></tr></table></figure></li>
<li>why will we use inverse code and complement code<br>   Because we can not  directly add two numbers by using original code, one of which is negative and the other is positive. Like the example below which gives us the wrong answer.  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 - 1 &#x3D; 1 + (-1) &#x3D; [00000001]ori + [10000001]ori &#x3D; [10000010]ori &#x3D; -2 (wrong)</span><br></pre></td></tr></table></figure>
  Then we turn to inverse code   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 - 1 &#x3D; 1 + (-1) &#x3D; [0000 0001]ori + [1000 0001]ori&#x3D; [0000 0001]inv + [1111 1110]inv &#x3D; [1111 1111]inv &#x3D; [1000 0000]ori &#x3D; -0</span><br></pre></td></tr></table></figure>
  It will cause a new problem that there will be two codes [0000 0000] original and [1000 0000] original to indicate 0.<br>  So we will use complement code  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1-1 &#x3D; 1 + (-1) &#x3D; [0000 0001]ori + [1000 0001]ori &#x3D; [0000 0001]com + [1111 1111]com &#x3D; [0000 0000]com&#x3D;[0000 0000]ori &#x3D; 0</span><br></pre></td></tr></table></figure></li>
<li>an note for -128.<br> we set its  complememnt code is [10000000] And it didnot have any orginal code and inverse code because it actually use the complement of -0.<br> This is why 8-bit binary, the range represented by the original code or the complement code is [-127, +127], and the range represented by the complement code is [-128, 127].<br> Because the machine uses  complement code,  for the 32-bit int type commonly used in programming, the range that can be expressed is: [-2^31, 2^31-1] Because the first bit represents the sign bit. When using the complement, it can save a minimum value -0.</li>
</ul>
<h3 id="common-problems-about-bitwise-operations"><a href="#common-problems-about-bitwise-operations" class="headerlink" title="common problems about bitwise operations:"></a>common problems about bitwise operations:</h3><ol>
<li><p>x &amp; (x - 1)</p>
<ul>
<li>used to erase the last bit of X<br>to understand x &amp; (x - 1), we should understand  x-1 first.<br>it means for x, set 0 to the position where the first 1 appears from the right to the left; set 1 to the all 0 after that position.</li>
<li><p>application:</p>
<ul>
<li>Using O (1) time to detect whether the integer n is the power of 2<br>that is to say, if n is the power of 2. It must greater<br>or equal than 1 and it only have one bit is 1.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkPowerOfTwo</span><span class="params">(n)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">  <span class="keyword">if</span> n &amp; (n<span class="number">-1</span>) == <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></li>
<li>to find how many bits are 1 for a number<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkHowManyOne</span><span class="params">(n)</span>:</span></span><br><span class="line">  num = <span class="number">0</span></span><br><span class="line">  <span class="keyword">while</span> n:</span><br><span class="line">    n = n&amp;(n<span class="number">-1</span>)</span><br><span class="line">    num+=<span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> num</span><br></pre></td></tr></table></figure></li>
<li>compute the hamming distance of a and b. (how many bits we need to change from a to b)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hammingDistance</span><span class="params">(x, y)</span>:</span></span><br><span class="line">      <span class="string">"""</span></span><br><span class="line"><span class="string">      :type x: int</span></span><br><span class="line"><span class="string">      :type y: int</span></span><br><span class="line"><span class="string">      :rtype: int</span></span><br><span class="line"><span class="string">      """</span></span><br><span class="line">      xor = x ^ y</span><br><span class="line">      num = <span class="number">0</span></span><br><span class="line">      <span class="keyword">while</span> xor:</span><br><span class="line">          xor = xor &amp; (xor <span class="number">-1</span>)</span><br><span class="line">          num += <span class="number">1</span></span><br><span class="line">      <span class="keyword">return</span> num</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>to check whether a bit of number is 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># set the number a, and the index of the bit we intend to check is b</span><br><span class="line">a &amp; 1&lt;&lt; b (the execution priority of &lt;&lt; is higher )</span><br></pre></td></tr></table></figure>
<ul>
<li>application: Given a set of distinct integers, nums, return all possible subsets (the power set). （the question can also use backtracking too)<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subsets</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>&lt;&lt;len(nums)):</span><br><span class="line">            tmp = []</span><br><span class="line">            <span class="comment"># a certain bit is 1 or not</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">                <span class="keyword">if</span> i &amp; (<span class="number">1</span> &lt;&lt; j):  </span><br><span class="line">                    tmp.append(nums[j])</span><br><span class="line"></span><br><span class="line">            res.append(tmp)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>a ^ b ^ b = a</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">to prove it:</span><br><span class="line">   a ^ b      b    -&gt; a</span><br><span class="line">   0 (same)   0       0</span><br><span class="line">   0 (same)   1       1</span><br><span class="line">   1（diff)   0       1</span><br><span class="line">   1（diff)   1       0</span><br></pre></td></tr></table></figure>
<ul>
<li><p>application:</p>
<ul>
<li>Can be used to encrypt</li>
<li>In the array, only one number appears once, and the rest appear twice, find the number that appears once.</li>
</ul>
<p>Because there is only one number appears once while others appear twice which can elminate by XOR</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findAppearOnce</span><span class="params">(nums)</span>:</span></span><br><span class="line">  n = len(nums)</span><br><span class="line">  ret = nums[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">    ret = ret ^ nums[i]</span><br><span class="line">  <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure></li>
<li>Given an array where every element occurs three times, except one element which occurs only once. Find the element that occurs once. Expected time complexity is O(n) and O(1) extra space.</li>
<li>idea: There are two numbers ones and twos.ones: The bits that have appeared 1st time or 4th time or 7th time .. etc.twos: The bits that have appeared 2nd time or 5th time or 8th time .. etc.If a bit is already in ones, add it to twos.XOR will add this bit to ones if it’s not there or remove this bit from ones if it’s already there.If a bit is in both ones and twos, remove it from ones and twos.When finished, ones contains the bits that only appeared 3*n+1 times, which are the bits for the element that only appeared once.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">getSingle</span><span class="params">(arr, n)</span>:</span> </span><br><span class="line">   ones = <span class="number">0</span></span><br><span class="line">   twos = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> range(n): </span><br><span class="line">       <span class="comment"># one &amp; arr[i]" gives the bits that </span></span><br><span class="line">       <span class="comment"># are there in both 'ones' and new </span></span><br><span class="line">       <span class="comment"># element from arr[]. We add these </span></span><br><span class="line">       <span class="comment"># bits to 'twos' using bitwise OR </span></span><br><span class="line">       twos = twos | (ones &amp; arr[i]) </span><br><span class="line"></span><br><span class="line">       <span class="comment"># XOR will add this bit to ones </span></span><br><span class="line">       <span class="comment">#if it's not there or remove this bit </span></span><br><span class="line">       <span class="comment"># from ones if it's already there</span></span><br><span class="line">       ones = ones ^ arr[i] </span><br><span class="line"></span><br><span class="line">       <span class="comment"># The common bits are those bits  </span></span><br><span class="line">       <span class="comment"># which appear third time. So these </span></span><br><span class="line">       <span class="comment"># bits should not be there in both  </span></span><br><span class="line">       <span class="comment"># 'ones' and 'twos'. common_bit_mask </span></span><br><span class="line">       <span class="comment"># contains all these bits as 0, so </span></span><br><span class="line">       <span class="comment"># that the bits can be removed from </span></span><br><span class="line">       <span class="comment"># 'ones' and 'twos' </span></span><br><span class="line">       common_bit_mask = ~(ones &amp; twos) </span><br><span class="line"></span><br><span class="line">       <span class="comment"># Remove common bits (the bits that  </span></span><br><span class="line">       <span class="comment"># appear third time) from 'ones' </span></span><br><span class="line">       ones &amp;= common_bit_mask </span><br><span class="line"></span><br><span class="line">       <span class="comment"># Remove common bits (the bits that </span></span><br><span class="line">       <span class="comment"># appear third time) from 'twos' </span></span><br><span class="line">       twos &amp;= common_bit_mask </span><br><span class="line">   <span class="keyword">return</span> ones </span><br><span class="line"><span class="comment">#https://www.geeksforgeeks.org/find-the-element-that-appears-once/</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>to check the lowest set bit<br> x &amp; (-x)<br> since the computer store the two’s complement so that the and operator will be implemented by two’s complement. <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">8  &amp; (-8)  &#x3D; 8</span><br><span class="line">7  &amp; (-7)  &#x3D; 1</span><br><span class="line">97 &amp; (-97) &#x3D; 1</span><br><span class="line"></span><br><span class="line">0000 1000 &amp; (1111 1000) &#x3D; 0000 1000</span><br><span class="line">0000 0111 &amp; (1111 1001) &#x3D; 0000 0001</span><br><span class="line">0110 0001 &amp; (1001 1111) &#x3D; 0000 0001</span><br></pre></td></tr></table></figure>
x- x&amp;(-x) is to move the lowest set bit and we will use the equation y = x- x&amp;(-x) in the binary indexed tree</li>
</ol>
<h3 id="common-operations"><a href="#common-operations" class="headerlink" title="common operations"></a>common operations</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Function</th>
<th>example</th>
<th>bit operation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove the last digit</td>
<td>(101101 - &gt; 10110)</td>
<td>x &gt;&gt; 1</td>
</tr>
<tr>
<td>Add a 0</td>
<td>(101101 - &gt; 1011010)</td>
<td>x &lt;&lt; 1</td>
</tr>
<tr>
<td>Add a 1</td>
<td>(101101 - &gt; 1011011)</td>
<td>x &lt;&lt; 1 + 1 at the end</td>
</tr>
<tr>
<td>Change the last bit to 1</td>
<td>(101100 - &gt; 101101)</td>
<td>x &#124; 1</td>
</tr>
<tr>
<td>Change the last bit to 0</td>
<td>(101101 - &gt; 101100)</td>
<td>x &#124; 1-1</td>
</tr>
<tr>
<td>The last bit is inverted</td>
<td>(101101 - &gt; 101100)</td>
<td>x ^ 1</td>
</tr>
<tr>
<td>Change the k-th bit from  right to 1</td>
<td>(101001 - &gt; 101101, k = 3)</td>
<td>x &#124; (1 &lt;&lt; (k-1))</td>
</tr>
<tr>
<td>Change the k-th bit of the right number to 0</td>
<td>(101101 - &gt; 101001, k = 3)</td>
<td>X &amp;  ~(1 &lt;&lt; (k-1))</td>
</tr>
<tr>
<td>Negate The k-th digit of  number from right</td>
<td>(101001 - &gt; 101101, k = 3)</td>
<td>x ^ (1 &gt;&gt; (k-1))</td>
</tr>
<tr>
<td>only keep the last three digits</td>
<td>(1101101 - &gt; 101)</td>
<td>x &amp; 7</td>
</tr>
<tr>
<td>keep the last K digits</td>
<td>(1101101 - &gt; 1101, k = 5)</td>
<td>x &amp; ( (1 &gt;&gt; k)-1)</td>
</tr>
<tr>
<td>Take the k-th digit</td>
<td>(1101101 - &gt; 1, k = 4)</td>
<td>x &gt;&gt; (k-1) &amp; 1</td>
</tr>
<tr>
<td>Change the kth bit to last to 1</td>
<td>(101001 - &gt; 101111, k = 4)</td>
<td>x &#124; (1 &gt;&gt; k-1)</td>
</tr>
<tr>
<td>negate the kth bit to last</td>
<td>(101001 - &gt; 100110, k = 4)</td>
<td>x ^ (1 &lt;&lt; k-1)</td>
</tr>
<tr>
<td>Change the continuous 1 on the right side to 0</td>
<td>(100101111 - &gt; 100100000)</td>
<td>x &amp; (x + 1)</td>
</tr>
<tr>
<td>Change the first 0 from the right to 1</td>
<td>(100101111 - &gt; 100111111)</td>
<td>x &#124; (x + 1)</td>
</tr>
<tr>
<td>Change the continuous 0 on the right into 1</td>
<td>(11011000 - &gt; 11011111)</td>
<td>x or (x-1)</td>
</tr>
<tr>
<td>Take the continuous 1</td>
<td>(100101111 - &gt; 1111)</td>
<td>(x ^ (x + 1))&gt;&gt; 1</td>
</tr>
<tr>
<td>Remove the left side of the last 1 to the last</td>
<td>(100101000 - &gt; 1000)</td>
<td>x &amp; (x ^ (x-1))</td>
</tr>
</tbody>
</table>
</div>
<h3 id="references"><a href="#references" class="headerlink" title="references"></a>references</h3><p><a href="https://www.zhihu.com/question/38206659">https://www.zhihu.com/question/38206659</a><br><a href="https://blog.csdn.net/zl10086111/article/details/80907428">https://blog.csdn.net/zl10086111/article/details/80907428</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.jpeg" alt="koko"></figure><p class="title is-size-4 is-block line-height-inherit">koko</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Troy, NY</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/lawiet019" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/lawiet019"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/technology/"><span class="level-start"><span class="level-item">technology</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/technology/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-27T05:09:09.000Z">2020-11-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/11/27/application-of-binary-search/">application of binary search</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-10-11T20:02:00.000Z">2020-10-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/11/prefix-infix-and-postfix/">prefix,infix and postfix</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-26T21:42:29.000Z">2020-08-26</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/26/bytes-order/">bytes order</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-16T02:10:00.000Z">2020-08-15</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/15/Sieve-of-Eratosthenes/">Sieve of Eratosthenes</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a> / <a class="link-muted" href="/categories/technology/math/">math</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-16T02:02:00.000Z">2020-08-15</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/15/catalan-number/">catalan number</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a> / <a class="link-muted" href="/categories/technology/math/">math</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Graph/"><span class="tag">Graph</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bit-manipulation/"><span class="tag">bit manipulation</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collections/"><span class="tag">collections</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/computing/"><span class="tag">computing</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dynamic-programming/"><span class="tag">dynamic programming</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linked-list/"><span class="tag">linked list</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regular-expression/"><span class="tag">regular expression</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sort/"><span class="tag">sort</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sorting/"><span class="tag">sorting</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tree/"><span class="tag">tree</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.png" alt="lawilet&#039;s website" height="28"></a><p class="size-small"><span>&copy; 2020 lawiet019</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://law-liet.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>