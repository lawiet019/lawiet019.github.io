<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: multithread - lawilet&#039;s website</title><meta property="og:type" content="blog"><meta property="og:title" content="lawilet&#039;s website"><meta property="og:url" content="http://law-liet.com/"><meta property="og:site_name" content="lawilet&#039;s website"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://law-liet.com/img/og_image.png"><meta property="article:author" content="lawiet019"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://law-liet.com"},"headline":"lawilet's website","image":["http://law-liet.com/img/og_image.png"],"author":{"@type":"Person","name":"lawiet019"},"description":""}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.png" alt="lawilet&#039;s website" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/lawiet019"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">multithread</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-12-08T04:07:00.000Z" title="2020-12-08T04:07:00.000Z">2020-12-07</time><span class="level-item"> lawiet019 </span><span class="level-item"><a class="link-muted" href="/categories/technology/">technology</a></span><span class="level-item">14 minutes read (About 2055 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/12/07/Multiprocessing-Vs-Threading/">Multiprocessing Vs. Threading</a></h1><div class="content"><h2 id="Multiple-CPUs-vs-multi-core-CPUs"><a href="#Multiple-CPUs-vs-multi-core-CPUs" class="headerlink" title="Multiple CPUs vs multi-core CPUs"></a>Multiple CPUs vs multi-core CPUs</h2><p><a href="https://www.zhihu.com/question/20998226">https://www.zhihu.com/question/20998226</a></p>
<h2 id="process-vs-Threading"><a href="#process-vs-Threading" class="headerlink" title="process vs Threading"></a>process vs Threading</h2><p>one process can have multiple Threadings<br>process has independet memory while threadings share memory<br><a href="https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html">https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html</a></p>
<h2 id="multitasking"><a href="#multitasking" class="headerlink" title="multitasking"></a>multitasking</h2><p>Operating system can run multiple tasks at the same time, you are in the browser, while listening to MP3, while in Word to catch up with homework, this is multi-tasking.<br>three modes of multi-tasking:</p>
<ol>
<li>Multiprocessing</li>
<li>Multithreading</li>
<li>Multiprocessing +  Multithreading</li>
</ol>
<h2 id="parallelism-vs-concurrency"><a href="#parallelism-vs-concurrency" class="headerlink" title="parallelism vs concurrency"></a>parallelism vs concurrency</h2><p><strong>Parallelism</strong>: it means that at the same time, multiple instructions are executed on multiple processors at the same time;<br><strong>Concurrency</strong>: at the same time, only one instruction can be executed, but multiple process instructions are executed in rotation, which makes it possible to execute multiple processes at the same time.</p>
<h2 id="Multithreading-in-Python"><a href="#Multithreading-in-Python" class="headerlink" title="Multithreading in Python"></a>Multithreading in Python</h2><p>For Python3, we usually use <code>threading</code> module.<br>One thing we must notice is that threading cannot provide real . The problem is just that it can’t use more than one of the available cores. This is due to something called the GIL(Global Interpreter Lock). Python threads still work for I/O bound tasks as opposed to CPU bound tasks which may cause deadlocks and race conditions. Many Python libraries solve this issue by using C extensions to bypass the GIL. Of course, this is all in the case of CPython.<br>it is much better to use multiprocessing to get the benefit of all the cores. But there are much fewer cores than there are threads. Cores are valuable resources and take up a lot of memory. If you don’t mind dealing with IPC(Interprocess Communication), then it is a great solution.</p>
<ul>
<li><p>What is GIL (Global Interpreter Lock)</p>
<ul>
<li>It is connected with CPython</li>
<li>It ensures that only one Python thread executes at any time</li>
<li>The GIL prevents race conditions and ensures thread safety. A nice explanation of how the GIL helps in these areas can be found here. In short, this mutex is necessary mainly because CPython’s memory management is not thread-safe.<br><a href="https://python3.guide/python-concurrency/the-python-gil">https://python3.guide/python-concurrency/the-python-gil</a></li>
<li><p>mechanism of GIL</p>
<p><img src="/images/pasted-20.png" alt="GIL.png"><br><a href="http://c.biancheng.net/view/5537.html">http://c.biancheng.net/view/5537.html</a></p>
</li>
<li>How to deal with GIL<ul>
<li>Use multiprocessing</li>
<li>Use another  Python implementation except Cpython</li>
<li>C extension programming technology.The main idea is to transfer computationally intensive tasks to C, independent of Python, and release the GIL in the C code while working. This can be done by inserting a special macro like the following in the C code.<br><a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p09_dealing_with_gil_stop_worring_about_it.html">https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p09_dealing_with_gil_stop_worring_about_it.html</a></li>
</ul>
</li>
</ul>
</li>
<li><p>the module <code>threading</code><br>an example from <a href="cnblogs.com/lucaq/p/7225166.html">website</a></p>
<ul>
<li>basic example</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">import threading</span><br><span class="line">   import time</span><br><span class="line"></span><br><span class="line">   def foo(n):</span><br><span class="line">       print(&#39;&gt;&gt;&gt;&gt;&gt;%s&#39; %n)</span><br><span class="line">       time.sleep(3)</span><br><span class="line"></span><br><span class="line">   def bar(n):</span><br><span class="line">       time.sleep(5)</span><br><span class="line">       print(&#39;&gt;&gt;&gt;&gt;&gt;%s&#39; %n)</span><br><span class="line"></span><br><span class="line">   s &#x3D; time.time()</span><br><span class="line"></span><br><span class="line">   t1 &#x3D; threading.Thread(target&#x3D;foo,args&#x3D;(2,))</span><br><span class="line">   t1.start()    # .start() - activate  thread</span><br><span class="line"></span><br><span class="line">   t2 &#x3D; threading.Thread(target&#x3D;bar,args&#x3D;(5,))</span><br><span class="line">   t2.setDaemon(True)　　# the main thread doesn&#39;t wait the child thread</span><br><span class="line">   t2.start()</span><br><span class="line"></span><br><span class="line">   t1.join()　　# wait one thread to be completed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   print(&#39;ending!&#39;)</span><br><span class="line">   print(&#39;cost time:&#39;,time.time()-s)</span><br></pre></td></tr></table></figure>
<ul>
<li>use class</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line"></span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.name = name</span><br><span class="line">        <span class="comment"># super().__init__()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'OK'</span>)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        print(<span class="string">'end'</span>,self.name)</span><br><span class="line"></span><br><span class="line">t1 = MyThread(<span class="string">"t1"</span>)</span><br><span class="line">t1.start()</span><br><span class="line">t2 = MyThread(<span class="string">"t2"</span>)</span><br><span class="line">t2.start()</span><br><span class="line">print(<span class="string">'ending all'</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>lock<br>lock is necessary even though we have GIL. Let we give an example.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it_without_lock</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        print(balance)</span><br><span class="line">        balance = balance + n</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        balance = balance - n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">threads = [</span><br><span class="line">  threading.Thread(target=change_it_without_lock, args=(<span class="number">8</span>,) ),</span><br><span class="line">  threading.Thread(target=change_it_without_lock, args=(<span class="number">10</span>,) )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">[t.start() <span class="keyword">for</span> t <span class="keyword">in</span> threads]</span><br><span class="line">[t.join() <span class="keyword">for</span> t <span class="keyword">in</span> threads]</span><br></pre></td></tr></table></figure>
<p>   From the unlock version, we will get value like 8,10</p>
<p>   We could use mutex in the following case<br>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">balance = <span class="number">0</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_it_without_lock</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        print(balance)</span><br><span class="line">        lock.acquire()</span><br><span class="line">        balance = balance + n</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        balance = balance - n</span><br><span class="line">        lock.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">threads = [</span><br><span class="line">  threading.Thread(target=change_it_without_lock, args=(<span class="number">8</span>,) ),</span><br><span class="line">  threading.Thread(target=change_it_without_lock, args=(<span class="number">10</span>,) )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">[t.start() <span class="keyword">for</span> t <span class="keyword">in</span> threads]</span><br><span class="line">[t.join() <span class="keyword">for</span> t <span class="keyword">in</span> threads]</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>recursive lock<br>Mutex can be divided into recursive lock and non recursive lock. Recursive lock is also called reentrant lock, and non recursive lock is also called non reentrant lock.<br>The same thread can acquire the same recursive lock multiple times without deadlock. If a thread acquires the same non recursive lock multiple times, a deadlock will occur.<br><a href="https://stackoverflow.com/questions/22885775/what-is-the-difference-between-lock-and-rlock">why we need Rlock</a></p>
</li>
<li><p>Semaphore<br>mutex is special case of Semaphore with value 1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> threading</span><br><span class="line"> <span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">semaphore = threading.Semaphore(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    semaphore.acquire()</span><br><span class="line">    print(<span class="string">'OK'</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    semaphore.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    t = threading.Thread(target=foo,args=())</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></li>
<li><p>Condition</p>
<p>The typical programming style using condition variables uses the lock to synchronize access to some shared state; threads that are interested in a particular change of state call wait() repeatedly until they see the desired state, while threads that modify the state call notify() or notify_all() when they change the state in such a way that it could possibly be a desired state for one of the waiters.<br>Here are functions:</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   acquire(*args) - Acquire the underlying lock. </span><br><span class="line">   </span><br><span class="line">   release()- Release the underlying lock. </span><br><span class="line">   </span><br><span class="line">   wait(timeout&#x3D;None)- Wait until notified or until a timeout occurs. If the calling thread has not acquired the lock when this method is called, a RuntimeError is raised.</span><br><span class="line">   </span><br><span class="line">   wait_for(predicate, timeout&#x3D;None)- Wait until a condition evaluates to true. predicate should be a callable which result will be interpreted as a boolean value. A timeout may be provided giving the maximum time to wait.</span><br><span class="line">   </span><br><span class="line">   notify(n&#x3D;1) - By default, wake up one thread waiting on this condition, if any. If the calling thread has not acquired the lock when this method is called, a RuntimeError is raised.</span><br><span class="line">   </span><br><span class="line">   notify_all()</span><br><span class="line">Wake up all threads waiting on this condition. This method acts like notify(), but wakes up all waiting threads instead of one. If the calling thread has not acquired the lock when this method is called, a RuntimeError is raised.</span><br></pre></td></tr></table></figure>
<p>   Here is an example of condition Leetcode 1188. Design Bounded Blocking Queue</p>
<ul>
<li>Event<br>The event of threading is used to control the execution of other threads by the main thread. The event mainly provides three methods: wait, clear and set.<br>Event handling mechanism: a “flag” is defined globally. If the value of “flag” is false, then when the program executes event.wait  Method, if the flag value is true, then event.wait  Method is not blocked.<br>Here are some common functions:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">event.wait (timeout = none): the thread calling the method will be blocked. If the timeout parameter <span class="keyword">is</span> set, the thread will stop blocking <span class="keyword">and</span> <span class="keyword">continue</span> to execute after timeout;</span><br><span class="line">event.set (): <span class="keyword">if</span> the flag of event <span class="keyword">is</span> set to true, all threads calling the wait method will be awakened;</span><br><span class="line">event.clear (): <span class="keyword">if</span> the flag of event <span class="keyword">is</span> set to false, all threads calling the wait method will be blocked;</span><br><span class="line">event.isSet (): judge whether the flag of event <span class="keyword">is</span> true.</span><br></pre></td></tr></table></figure>
Here is an application of it.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading,time</span><br><span class="line"></span><br><span class="line">event = threading.Event() <span class="comment"># default value is false</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> event.is_set():</span><br><span class="line">        print(<span class="string">'wait.....'</span>)</span><br><span class="line">        event.wait(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">'Connect to redis server'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    t = threading.Thread(target=foo,args=())</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'attempt to start redis server'</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">event.set()     <span class="comment"># set the flag as True</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="multiprocessing-in-python"><a href="#multiprocessing-in-python" class="headerlink" title="multiprocessing in python"></a>multiprocessing in python</h2><p>Unlike multithreading, The multiprocessing in Python is real.We always use <code>multiprocessing</code>.<br>Let we look at it:</p>
<ul>
<li>basic exmaple </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        print(<span class="string">" the child %s with pid run：%s"</span>%(name,os.getpid())) </span><br><span class="line">        print(<span class="string">"the id of the parent is %d"</span>%os.getppid())</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"the parent process %d starts"</span> % os.getpid())</span><br><span class="line">    <span class="comment"># create the child process and pass new arguments</span></span><br><span class="line">    p = Process(target=run, args=(<span class="string">"Ail"</span>,)) </span><br><span class="line">    p.start()  <span class="comment"># start child process </span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        print(<span class="string">"this is forever loop for see process status"</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>The output is like </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">the parent process 20686 starts</span><br><span class="line">this is forever loop for see process status</span><br><span class="line">the child Ail with pid run：20687</span><br><span class="line">the id of the parent is 20686</span><br></pre></td></tr></table></figure>
<p>We could use command <code>ps aux | egrep &#39;(python)&#39;</code><br>We could see script like that<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">koko             20687   0.0  0.0  4284264   1312 s001  S+    7:25PM   0:00.08 python &#x2F;Users&#x2F;koko&#x2F;Documents&#x2F;prep&#x2F;blog&#x2F;test.py</span><br><span class="line">koko             20686   0.0  0.0  4284264   2900 s001  S+    7:25PM   0:00.16 python &#x2F;Users&#x2F;koko&#x2F;Documents&#x2F;prep&#x2F;blog&#x2F;test.py</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>join</code> function - make  parent process wait the child process to end</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"child process starts"</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"child process ends"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"parent process starts"</span>)</span><br><span class="line">    p = Process(target=run)</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()  <span class="comment"># wait children process </span></span><br><span class="line">    print(<span class="string">"parent process ends"</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>Pool</code></p>
<p>to handle lots of child process </p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> multiprocessing.pool <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep, time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"child process named %s starts,and its ID is %d"</span> % (name, os.getpid()))</span><br><span class="line">    start = time()</span><br><span class="line">    sleep(random.choice([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]))</span><br><span class="line">    end = time()</span><br><span class="line">    print(<span class="string">"child process named %s starts,and its ID is %d. It spend times .2%f"</span> % (name, os.getpid(), end-start))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"parent process starts"</span>)</span><br><span class="line">    <span class="comment"># set size of pool, the default value is the number of cores </span></span><br><span class="line">    p = Pool(<span class="number">8</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="comment"># put into pool</span></span><br><span class="line">        p.apply_async(run, args=(i,))</span><br><span class="line">    <span class="comment"># we must call close before join and close will let all no other process can joined</span></span><br><span class="line">    p.close()</span><br><span class="line">    <span class="comment"># wait all the child  process to end </span></span><br><span class="line">    p.join()</span><br><span class="line">    print(<span class="string">"parent process ends"</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>the Communication of child process and parent process </p>
<p>They cannot share the global variable. We will use <code>Queue</code> in <code>multiprocessing</code>. Queue will offer methods to write and read.<br>Both end of queue can read and write.Here is an example</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Queue</span><br><span class="line"><span class="keyword">import</span> os, time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">child1</span><span class="params">(w_value,q)</span>:</span></span><br><span class="line">    q.put(w_value) </span><br><span class="line">    r = q.get()<span class="comment"># it will block</span></span><br><span class="line">    print(<span class="string">"child 1 read"</span>,r)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">child2</span><span class="params">(w_value,q)</span>:</span></span><br><span class="line">    r = q.get()</span><br><span class="line">    print(<span class="string">"child 2 read "</span>,r)</span><br><span class="line">    q.put(w_value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">  </span><br><span class="line">    q = Queue()</span><br><span class="line">    c1 = Process(target=child1, args=(<span class="number">1</span>,q,))</span><br><span class="line">    c2 = Process(target=child2, args=(<span class="number">2</span>,q,))</span><br><span class="line">    c1.start()</span><br><span class="line">    c2.start()</span><br></pre></td></tr></table></figure>
<p>   other functions in queue </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Queue.qsize() # return the size of queue   </span><br><span class="line">Queue.empty() # check wether the queue is empty   </span><br><span class="line">Queue.get_nowait() # Return an item if one is immediately available, else raise QueueEmpty.</span><br></pre></td></tr></table></figure>
<p>  Another class <a href="https://docs.python.org/3/library/multiprocessing.html">Pipe</a> can be used for this too.</p>
<p>  Also <code>shared memory</code> can be used to handle this problem.<br>    Data can be stored in a shared memory map using <code>Value</code> or <code>Array</code>. For example, the following code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Value, Array</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(n, a)</span>:</span></span><br><span class="line">    n.value = <span class="number">3.1415927</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        a[i] = -a[i]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    num = Value(<span class="string">'d'</span>, <span class="number">0.0</span>)</span><br><span class="line">    arr = Array(<span class="string">'i'</span>, range(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    p = Process(target=f, args=(num, arr))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    print(num.value)</span><br><span class="line">    print(arr[:])</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Lock </p>
<p>we could use a lock to ensure Synchronization</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Lock</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(l, i)</span>:</span></span><br><span class="line">    l.acquire()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(<span class="string">'hello world'</span>, i)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        l.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        Process(target=f, args=(lock, num)).start()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>other functions <ul>
<li>count the number of core of computers<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'the number of cores is '</span> + str(multiprocessing.cpu_count()))</span><br></pre></td></tr></table></figure></li>
<li>All currently running  child processes<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        print(<span class="string">" the child %s with pid run：%s"</span>%(name,os.getpid()))</span><br><span class="line">        print(<span class="string">"the id of the parent is %d"</span>%os.getppid())</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">p = Process(target=run, args=(<span class="string">"Ail"</span>,))</span><br><span class="line">p.start()</span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> multiprocessing.active_children():</span><br><span class="line">        print(<span class="string">'the child process name is  '</span> + p.name + <span class="string">' id: '</span> + str(p.pid))</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p><a href="https://stackoverflow.com/questions/44793371/is-multithreading-in-python-a-myth#:~:text=No%2C%20Python%20does%20have%20multithreading,GIL(Global%20Interpreter%20Lock">https://stackoverflow.com/questions/44793371/is-multithreading-in-python-a-myth#:~:text=No%2C%20Python%20does%20have%20multithreading,GIL(Global%20Interpreter%20Lock</a>).<br><a href="http://c.biancheng.net/view/5537.html">http://c.biancheng.net/view/5537.html</a><br><a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p09_dealing_with_gil_stop_worring_about_it.html">https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p09_dealing_with_gil_stop_worring_about_it.html</a><br><a href="https://www.jianshu.com/p/a5f10c152c20">https://www.jianshu.com/p/a5f10c152c20</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/avatar.jpeg" alt="koko"></figure><p class="title is-size-4 is-block line-height-inherit">koko</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Troy, NY</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">19</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/lawiet019" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/lawiet019"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/technology/"><span class="level-start"><span class="level-item">technology</span></span><span class="level-end"><span class="level-item tag">23</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/technology/math/"><span class="level-start"><span class="level-item">math</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-29T15:37:00.000Z">2020-12-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/12/29/shortest-path-algorithm/">shortest_path_algorithm</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-24T18:16:00.000Z">2020-12-24</time></p><p class="title is-6"><a class="link-muted" href="/2020/12/24/check-cycles-in-directed-graph/">check cycles in directed graph</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-12-08T04:07:00.000Z">2020-12-07</time></p><p class="title is-6"><a class="link-muted" href="/2020/12/07/Multiprocessing-Vs-Threading/">Multiprocessing Vs. Threading</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-11-27T05:09:00.000Z">2020-11-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/11/27/application-of-binary-search/">application of binary search</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-10-11T20:02:00.000Z">2020-10-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/11/prefix-infix-and-postfix/">prefix,infix and postfix</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/technology/">technology</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Graph/"><span class="tag">Graph</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/binary-search/"><span class="tag">binary search</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bit-manipulation/"><span class="tag">bit manipulation</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collections/"><span class="tag">collections</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/computing/"><span class="tag">computing</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dynamic-programming/"><span class="tag">dynamic programming</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/graph/"><span class="tag">graph</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linked-list/"><span class="tag">linked list</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/multiprocess/"><span class="tag">multiprocess</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/multithread/"><span class="tag">multithread</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag is-grey-lightest">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regular-expression/"><span class="tag">regular expression</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sort/"><span class="tag">sort</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sorting/"><span class="tag">sorting</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tool/"><span class="tag">tool</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tree/"><span class="tag">tree</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.png" alt="lawilet&#039;s website" height="28"></a><p class="size-small"><span>&copy; 2021 lawiet019</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://law-liet.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>